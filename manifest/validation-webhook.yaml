apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: example-webhook
webhooks:
  - name: example-webhook.default.svc.cluster.local
    admissionReviewVersions:
      - "v1"
    sideEffects: "None"
    timeoutSeconds: 30
    # objectSelector:
    #   matchLabels:
    #     example-webhook-enabled: "true"
    clientConfig:
      service:
        name: example-webhook
        namespace: default
        path: "/validate--v1-secret"
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURjRENDQWxpZ0F3SUJBZ0lVU25uSmVFaWpOb1R3bncwaDc4bVIySE5velBZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1VERUxNQWtHQTFVRUJoTUNVRXd4RURBT0JnTlZCQWdUQjBWNFlXMXdiR1V4RURBT0JnTlZCQWNUQjFkaApjbk5oZDJFeEVEQU9CZ05WQkFvVEIwVjRZVzF3YkdVeEN6QUpCZ05WQkFzVEFrTkJNQjRYRFRJek1ETXpNVEEyCk5USXdNRm9YRFRJNE1ETXlPVEEyTlRJd01Gb3dVREVMTUFrR0ExVUVCaE1DVUV3eEVEQU9CZ05WQkFnVEIwVjQKWVcxd2JHVXhFREFPQmdOVkJBY1RCMWRoY25OaGQyRXhFREFPQmdOVkJBb1RCMFY0WVcxd2JHVXhDekFKQmdOVgpCQXNUQWtOQk1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBTUlJQkNnS0NBUUVBcGF1R0x5UmtHWDBMCisxRzVRK1liNWVhaFVGSlQvbUxRRWdoTGRVSFVucXNxVFZWaERicFVYSkVhTTJSbWpJNEVMWlR4M256bVdqVXgKb0NNNFNlbXFyY2JJVVZGcUdhaG52eDhJdnRuczdlOHlWUU5RODdGYXJ6ZGxIYXNtT29hME9pZEV2anErRjRHaQpyNFA3cjg3c0g4ZEZldEhFR1hJbzZERXZtQld0bHNVMkkxc0tGVldYQnA0MTJ6elRkdUI2WkNlTFltd0NHTHFICkN2R3Fnb0FQd1UyVTdNK0FHRGhQcGZ0T3JnMWthMDExbHhzQ3RDUFBieWlwYTNCeTkvcDBQQVc3dGZMYk1UM3gKUUNkRFgvT1dvVGVjODNud0wrendITVFtYnVwYk5HREFlbTJPY05OTHkrZDFYUkQ1UktSLzYyZDVIalA5bER1aAp4VXh3QzR4aFlRSURBUUFCbzBJd1FEQU9CZ05WSFE4QkFmOEVCQU1DQVFZd0R3WURWUjBUQVFIL0JBVXdBd0VCCi96QWRCZ05WSFE0RUZnUVVabGRoOXFoTU5hc1k1ams0bFI2eFdjV1h0ZE13RFFZSktvWklodmNOQVFFTEJRQUQKZ2dFQkFJaFNoR1laQU5DekRRb01GY0FZWGE5WGwzdGlsemZQZUtpeEV1RFRmUHNPeHdIcTRDVGRBUVFFdVJHRwp6TWNiM2FNanFFajBRc0E2NUVMcmxwVkhDelRSUHY5c2crL1FlZWo1dWNRU241NW5pS2VvYmlOZEdUYTgvWXBpCnBRbzl4Zkd3V0dSdXZQdE9HeHdtQTZjcXEzMjFWYkNrV3pxWGxoVzRiYXJnczZuUmJiMDdWMEZtUytDdnZYZ0gKRmlxdWo4S0t3SVRoa3BJY1d1VVYyMko2WjdPQkYxajJKOEZqZjFndGZFZGoralRueEh4RnNBTkxDMEl5SlpTSgo5QUI5eE4rT1duZzNUZDhaVWNDRFpETCtqUG5nelhadllVNXpGNUVtZ0NVSWVVS0NMZ0Jhbk0ycnlrbWkzdGF0CjBSbU1rSmpSMkZFNHhzVG9CckhXZDlyWThqQT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="
    rules:
      - operations: [ "CREATE", "UPDATE" ]
        apiGroups: [""]
        apiVersions: ["v1"]
        resources: ["secrets"]
        scope: "Namespaced"